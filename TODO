# ğŸ“‹ Improvement Plan: init_debian_distro

Improvement procedure divided into **incremental and independent phases**.  
Each item is a complete and testable work unit.

---

## ğŸ”´ Phase 1: Critical Fixes (Blocking Features)

- [ ] **Create missing Helm script**  
      â†’ Implement `bin/install_softwares/Helm.sh` following other installer patterns

- [ ] **Fix SQLite CLI typo**  
      â†’ In `SQLite_CLI.sh` and `constants.sh`: `intall_SQLite_CLI` â†’ `install_SQLite_CLI`

- [ ] **Fix SQLite Browser function name**  
      â†’ In `browser_SQLite.sh` and `constants.sh`: `install_browser-SQLite` â†’ `install_browser_SQLite`

- [x] **Add error checks to cd commands** âœ…  
      â†’ âœ“ run_app.sh: Already had `|| exit 1` on all cd commands  
      â†’ âœ“ font.sh: Added checks to `cd font_tmp` and `cd ..` with proper error handling

- [ ] **Fix main argument passing**  
      â†’ In `bin/install_softwares.sh:325`: `main $*` â†’ `main "$@"`

---

## ğŸŸ¢ Phase 2: Variable Management and Export

- [x] **Export variables in constants.sh** âœ…  
      â†’ Add `export` to all variables used by other scripts

- [x] **Export USER_SHELL** âœ…  
      â†’ In `install_softwares.sh` to make it available to `kubectl.sh`

- [x] **Remove eval from verify_command** âœ…  
      â†’ Replace with safer direct execution in `bin/install_softwares.sh:14`

---

## ğŸ§¹ Phase 3: Legacy Code Cleanup

- [x] **Archive install_softwares_old.sh** âœ…  
      â†’ Moved to `archive/` folder

- [ ] **Remove commented code**  
      â†’ Clean commented blocks without explanation in all scripts

---

## ğŸ›¡ï¸ Phase 4: Error Handling Improvements

- [x] **Standardize temporary file cleanup** âœ…  
      â†’ Ensure all scripts remove downloaded files

- [ ] **Add rollback on failure**  
      â†’ Automatic cleanup when installation fails midway

- [x] **Improve error messages** âœ…  
      â†’ Make messages actionable with resolution suggestions

- [x] **Add consistent logging** âœ…  
      â†’ All scripts must use `log_message` uniformly

---

## ğŸ”’ Phase 5: Security

- [ ] **Replace curl pipe sudo**  
      â†’ In `NodeJS.sh:10` use download and verify before execution

- [x] **Add checksum verification** âœ…  
      â†’ âœ“ VSCode.sh: SHA256 verification with jq/python3 fallback  
      â†’ TODO: k9s.sh, kubectl.sh (kubectl already has it)

- [ ] **Validate GPG signatures**  
      â†’ Where available for downloaded packages

---

## âš™ï¸ Phase 6: Versioning and Configuration

- [ ] **Centralize software versions**  
      â†’ Note necessary Move hardcoded versions (GO, kind) to `constants.sh`

- [x] **Support automatic latest release** âœ…  
      â†’ Use GitHub API/curl to get latest available version

- [x] **Create .env.example file**   
      â†’ Template for user configurations (currently only Eduroam commented)

---

## ğŸ”§ Phase 7: Fixing ShellCheck Warnings

- [ ] **Quote all variables**  
      â†’ Fix "variable not quoted" warnings in all scripts

- [ ] **Separate declare and assign**  
      â†’ Pattern `local var=$(cmd)` masks exit code

- [ ] **Handle source with variable paths**  
      â†’ In `go.sh:37`, `nvm.sh:22` for `~/.bashrc`

---

## ğŸ“¥ğŸ“¤ Phase 8: Input/Output Improvements

- [X] **Fix flag parsing in run_app.sh** âœ…  
      â†’ Handle multiple arguments correctly (lines 60-66)

- [X] **Add dry-run mode** âœ…  
      â†’ Flag `--dry-run` for preview without installing

- [ ] **Implement verbose mode**  
      â†’ Flag `-v/--verbose` for detailed debug

- [ ] **Add progress bar**  
      â†’ Enable commented progress bar code (if useful)

---

## âœ¨ Phase 9: New Features

- [ ] **Implement uninstall command**  
      â†’ Remove software installed by the tool

- [ ] **Implement update command**  
      â†’ Update already installed software

- [x] **Add pre-flight checks** âœ…  
      â†’ Created `bin/preflight_check.sh` with 10 comprehensive checks  
      â†’ Verifies: sudo, internet, DNS, disk space, apt availability, system compatibility, base commands, permissions, user privileges, /tmp space

- [ ] **Implement state tracking**  
      â†’ JSON file that tracks what was installed and when

---

## ğŸ“š Phase 10: Documentation

- [ ] **Expand README**  
      â†’ Add sections: prerequisites, troubleshooting, how to contribute

- [ ] **Add header comments**  
      â†’ Document purpose and usage of each script

- [ ] **Create CONTRIBUTING.md**  
      â†’ Guide for adding new software

- [ ] **Update TODO**  
      â†’ Track technical debt and planned features

---

## ğŸ§ª Phase 11: Testing and Validation

- [ ] **Add syntax tests**  
      â†’ Script that runs shellcheck on all files

- [ ] **Add installation tests**  
      â†’ Script that verifies `is_installed` post-install

- [ ] **Test distro compatibility**  
      â†’ Validate on different Debian/Ubuntu versions

---

## ğŸ“ Considerations

**Recommended priority:**  
`Phase 1` â†’ `Phase 2` â†’ `Phase 3` â†’ rest as desired

**General rules:**
- âœ… Each item is **independent** (possible to skip or reorder subsequent phases)
- ğŸ§ª **Testing**: After each modification test basic functionality
- ğŸ’¾ **Backup**: Recommended git commit before each modification

---

**Legend:**
- [ ] Todo
- [x] Completed âœ…