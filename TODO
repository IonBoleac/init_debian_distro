# ğŸ“‹ Piano di Miglioramento: init_debian_distro

Procedura di miglioramento suddivisa in **fasi incrementali e indipendenti**.  
Ogni punto Ã¨ un'unitÃ  di lavoro completa e testabile.

---

## ğŸ”´ Fase 1: Correzioni Critiche (FunzionalitÃ  Bloccanti)

- [ ] **Creare script Helm mancante**  
      â†’ Implementare `bin/install_softwares/Helm.sh` seguendo pattern degli altri installer

- [ ] **Correggere typo SQLite CLI**  
      â†’ In `SQLite_CLI.sh` e `constants.sh`: `intall_SQLite_CLI` â†’ `install_SQLite_CLI`

- [ ] **Correggere nome funzione SQLite Browser**  
      â†’ In `browser_SQLite.sh` e `constants.sh`: `install_browser-SQLite` â†’ `install_browser_SQLite`

- [ ] **Aggiungere controlli errore ai comandi cd**  
      â†’ In `run_app.sh` righe 64, 69, 75, 79 e `bin/terminal_config/font.sh:6`

- [ ] **Correggere passaggio argomenti main**  
      â†’ In `bin/install_softwares.sh:325`: `main $*` â†’ `main "$@"`

---

## ğŸŸ¢ Fase 2: Gestione Variabili e Export

- [x] **Esportare variabili in constants.sh** âœ…  
      â†’ Aggiungere `export` a tutte le variabili usate da altri script

- [x] **Esportare USER_SHELL** âœ…  
      â†’ In `install_softwares.sh` per renderla disponibile a `kubectl.sh`

- [x] **Rimuovere eval da verify_command** âœ…  
      â†’ Sostituire con esecuzione diretta piÃ¹ sicura in `bin/install_softwares.sh:14`

---

## ğŸ§¹ Fase 3: Pulizia Codice Legacy

- [x] **Archiviare install_softwares_old.sh** âœ…  
      â†’ Spostato in cartella `archive/`

- [ ] **Rimuovere codice commentato**  
      â†’ Pulire blocchi commentati senza spiegazione in tutti gli script

---

## ğŸ›¡ï¸ Fase 4: Miglioramenti Error Handling

- [x] **Uniformare cleanup file temporanei** âœ…  
      â†’ Garantire che tutti gli script rimuovano file scaricati

- [ ] **Aggiungere rollback su fallimento**  
      â†’ Cleanup automatico quando installazione fallisce a metÃ 

- [x] **Migliorare messaggi di errore** âœ…  
      â†’ Rendere messaggi actionable con suggerimenti risoluzione

- [ ] **Aggiungere logging consistente**  
      â†’ Tutti gli script devono usare `log_message` uniformemente

---

## ğŸ”’ Fase 5: Sicurezza

- [ ] **Sostituire curl pipe sudo**  
      â†’ In `NodeJS.sh:10` usare download e verifica prima di esecuzione

- [ ] **Aggiungere verifica checksum**  
      â†’ Per download binari in `VSCode.sh`, `k9s.sh`, `kubectl.sh`

- [ ] **Validare GPG signatures**  
      â†’ Dove disponibili per pacchetti scaricati

---

## âš™ï¸ Fase 6: Versioning e Configurazione

- [ ] **Centralizzare versioni software**  
      â†’ Spostare versioni hardcoded (GO, kind) in `constants.sh`

- [ ] **Supportare latest release automatico**  
      â†’ Usare API GitHub/curl per ottenere ultima versione disponibile

- [ ] **Creare file .env.example**  
      â†’ Template per configurazioni utente (al momento solo Eduroam commentato)

---

## ğŸ”§ Fase 7: Fixing ShellCheck Warnings

- [ ] **Quotare tutte le variabili**  
      â†’ Risolvere warning "variable not quoted" in tutti gli script

- [ ] **Separare declare e assign**  
      â†’ Pattern `local var=$(cmd)` maschera exit code

- [ ] **Gestire source con path variabili**  
      â†’ In `go.sh:37`, `nvm.sh:22` per `~/.bashrc`

---

## ğŸ“¥ğŸ“¤ Fase 8: Miglioramenti Input/Output

- [ ] **Fixare parsing flags in run_app.sh**  
      â†’ Gestire correttamente argomenti multipli (righe 60-66)

- [ ] **Aggiungere modalitÃ  dry-run**  
      â†’ Flag `--dry-run` per preview senza installare

- [ ] **Implementare modalitÃ  verbose**  
      â†’ Flag `-v/--verbose` per debug dettagliato

- [ ] **Aggiungere barra progresso**  
      â†’ Abilitare codice progress bar commentato (se utile)

---

## âœ¨ Fase 9: FunzionalitÃ  Nuove

- [ ] **Implementare comando uninstall**  
      â†’ Rimozione software installati dal tool

- [ ] **Implementare comando update**  
      â†’ Aggiornamento software giÃ  installati

- [ ] **Aggiungere pre-flight checks**  
      â†’ Verificare prerequisiti (sudo, internet, spazio disco) prima esecuzione

- [ ] **Implementare state tracking**  
      â†’ File JSON che traccia cosa installato e quando

---

## ğŸ“š Fase 10: Documentazione

- [ ] **Espandere README**  
      â†’ Aggiungere sezioni: prerequisiti, troubleshooting, come contribuire

- [ ] **Aggiungere header comments**  
      â†’ Documentare scopo e uso di ogni script

- [ ] **Creare CONTRIBUTING.md**  
      â†’ Guida per aggiungere nuovi software

- [ ] **Aggiornare TODO**  
      â†’ Tracciare technical debt e feature pianificate

---

## ğŸ§ª Fase 11: Testing e Validazione

- [ ] **Aggiungere test sintassi**  
      â†’ Script che esegue shellcheck su tutti i file

- [ ] **Aggiungere test installazione**  
      â†’ Script che verifica `is_installed` post-install

- [ ] **Test compatibilitÃ  distro**  
      â†’ Validare su Debian/Ubuntu versioni diverse

---

## ğŸ“ Considerazioni

**PrioritÃ  consigliata:**  
`Fase 1` â†’ `Fase 2` â†’ `Fase 3` â†’ resto a scelta

**Regole generali:**
- âœ… Ogni punto Ã¨ **indipendente** (possibile saltare o riordinare fasi successive)
- ğŸ§ª **Testing**: Dopo ogni modifica testare funzionamento base
- ğŸ’¾ **Backup**: Consigliato commit git prima di ogni modifica

---

**Legenda:**
- [ ] Todo
- [x] Completato âœ…